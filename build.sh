#!/bin/bash

COMPONENTS_PATH="lib/components/"

components=`ls -l $COMPONENTS_PATH | egrep '^d' | awk '{print $9}'`;

echo '=====================================================================================================================================';
echo '		>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>> Cleaning <<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<';
echo '=====================================================================================================================================';
grunt clear;

echo '=====================================================================================================================================';
echo '		>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>> Building Ikebana <<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<';
echo '=====================================================================================================================================';
grunt build-ikebana;

for component in $components
do
	echo '=====================================================================================================================================';
	echo '		>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>> Building '${component}' <<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<';
	echo '=====================================================================================================================================';
	grunt build-this -component=${component};
done

echo '=====================================================================================================================================';
echo '		>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>> Archiving Ikebana <<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<';
echo '=====================================================================================================================================';
grunt archive-all;

for component in $components
do
echo '=====================================================================================================================================';
echo '		>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>> Archiving '${component}' <<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<';
echo '=====================================================================================================================================';
	grunt archive-this -component=${component};
done